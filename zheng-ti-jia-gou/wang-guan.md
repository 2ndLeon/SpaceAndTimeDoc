# 网关

## 概述

网关是Space and Time的中枢神经系统，提供一套微服务来促进平台功能。下图说明了网关架构的高级概述，显示了它的组合服务以及它如何与更广泛的平台交互。网关为数据进入系统（例如区块链索引）和数据退出系统（例如智能合约）提供了一种手段。

<figure><img src="https://1359882050-files.gitbook.io/~/files/v0/b/gitbook-x-prod.appspot.com/o/spaces%2FzHdDPR6NVKwyccJmuzAw%2Fuploads%2Fhi8rHYSkXHMJaqCki3Ky%2Fgateway.png?alt=media&#x26;token=0e167ec6-806d-40bb-8e99-5be46f63e6c0" alt=""><figcaption><p><em>SxT 网关架构</em></p></figcaption></figure>

* **路由** - 支持与去中心化数据仓库网络的事务和查询交互
* **流式传输** - 充当大容量客户流式传输（事件驱动）工作负载的接收器
* **共识** - 为数据进出平台提供高性能的拜占庭容错
* **查询证明** - 向平台提供 SQL 证明
* **表锚** - 通过将表锚定在链上，为平台提供存储证明
* **智能** - 支持平台治理和运营管理/编排
* **安全性** - 防止未经身份验证和未经授权访问平台

## 网关组件

### 路由

**路由支持与去中心化数据仓库网络的事务和查询交互。**路由为客户端提供了一个接口（通过 REST 和 GraphQL API 以及 JDBC/ODBC）来与他们的数据进行交互。客户端通过这种抽象执行事务和查询，就好像连接到一个无限可用的集群一样。在幕后，每个请求都被路由到适当的数据仓库实例，处理网络上的数据分布以及任何可能的故障情况。

### 流式传输

**流作为大容量客户流（事件驱动）工作负载的接收器。**网关的 Streaming 组件将 Kafka 提供为持久且容错的服务，这样用户数据可以流式传输到平台，在平台上可以灵活地合并到存储的数据中。

### 共识

**共识对进出平台的数据提供高性能的拜占庭容错。**数据通过提交输出的冗余 ETL 流程（例如区块链索引）进入平台。跨不同网关运行的共识服务实例然后就输入达成一致以产生单个输出。共识确保不正确的执行或恶意活动不会影响关键平台数据。

### 查询证明

**查询证明向平台提供 SQL 证明。**当用户将数据插入表中时，会更新数字指纹（哈希）以表示数据。然后，当用户请求防篡改查询时，数据库引擎会计算结果和加密证明。最后，根据数字指纹（基于 SxT 的新型 SQL 证明）验证从数据库返回的证明，以确保正确执行查询。 Query Proofing 与 Consensus 齐头并进：证明经过冗余验证并输入 Consensus，确保验证者不会恶意行为，为最终用户提供查询执行的端到端防篡改。

### 表锚

**表锚定通过将表锚定在链上，为平台提供存储证明。**当数据进入平台时，表锚定组件会更新一个默克尔树，其根哈希会定期锚定到智能合约上。这允许网关审核数据仓库集群，而无需传输大量数据。这个过程也为周期性的自我审计开辟了道路。由于根哈希通过智能合约锚定到链上，因此会发出事件。反过来，SxT 索引主要区块链（包括锚定根默克尔树哈希的 SxT 智能合约），为数据的高效和安全验证提供手段。

### 智能

**智能支持平台治理和运营管理/编排。**该组件管理资源分配、验证集群健康状况并启用平台客户付款。它负责让新运营商入职、管理他们的声誉并优化整个平台的性能。
